<!--
      This webpage embeds and controls your Prezi (it consumes commands sent from Glass to Firebase)
-->

<html>
<head>
<title>Presentation Remote for Google Glass</title>
<script type='text/javascript' src='https://cdn.firebase.com/js/client/1.0.2/firebase.js'></script>
<script src="prezi_player.js"></script>
</head>
<body>
<div id="prezi-player"></div>
<script>
var prezi_id = 'yaveytgbvunw';
var player = new PreziPlayer('prezi-player', {
    'preziId' : prezi_id,
	explorable: true,
	controls: true
});

var fb_root;
player.on(PreziPlayer.EVENT_STATUS, function(event) {
    if (event.value == PreziPlayer.STATUS_CONTENT_READY) {
	fb_root = new Firebase('https://controller.firebaseio.com');
	fb_root.child('commands').on('child_added', function(snapshot) {
		var command = snapshot.val();
		snapshot.ref().remove();
		if(command == 'SWIPE_RIGHT') {
			player.flyToNextStep();
		} else if(command == 'SWIPE_LEFT') {
			player.flyToPreviousStep();
		}
	});
    }
});
</script>
</body>
</html>
